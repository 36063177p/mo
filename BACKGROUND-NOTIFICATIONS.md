# ๐ ุฅุดุนุงุฑุงุช ุงูุฎูููุฉ - ุงูุชุทุจูู ุงููุบูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุฅุดุนุงุฑุงุช ูุชูุฏู ูุนูู ุญุชู ุนูุฏูุง ูููู ุงูุชุทุจูู ูุบููุงู ุจุงุณุชุฎุฏุงู Service Worker ู Background Sync!

---

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. **ุฅุดุนุงุฑุงุช ุงูุฎูููุฉ** ๐
- โ **ุชุนูู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู** - Service Worker ูุดุท ุฏุงุฆูุงู
- โ **ูุญุต ุฏูุฑู ูู 12 ุณุงุนุฉ** - Periodic Background Sync
- โ **ูุญุต ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู** - Background Sync
- โ **ุชุฎุฒูู ุงูุจูุงูุงุช ูู IndexedDB** - ูููุตูู ุฅูููุง ุฏูู ุงุชุตุงู

### 2. **Service Worker ุงููุญุณูู** ๐๏ธ
- โ **ูุญุต ุงูููุงุนูุฏ ุชููุงุฆูุงู** - ููุนุฏ ุงููุตููุ ุงูุฏูุนุ ุงูุฅูุฑุงุฌ
- โ **ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุณุทุญ ุงูููุชุจ** - ุญุชู ุนูุฏ ุฅุบูุงู ุงููุชุตูุญ
- โ **ุชุฎุฒูู ุฐูู ูู IndexedDB** - ุจูุงูุงุช ุงูุดุญูุงุช ูุชุงุญุฉ ุฏุงุฆูุงู
- โ **ุงุชุตุงู ุซูุงุฆู ุงูุงุชุฌุงู** - ุจูู ุงูุชุทุจูู ู Service Worker

### 3. **Periodic Background Sync** โฐ
- โ **ูุญุต ูู 12 ุณุงุนุฉ** - ุชููุงุฆูุงู ูู ุงูุฎูููุฉ
- โ **ูุง ูุญุชุงุฌ ุงูุชุทุจูู ููุชูุญุงู** - ูุนูู ุญุชู ุนูุฏ ุงูุฅุบูุงู
- โ **ูููุฑ ููุทุงูุฉ** - ูุณุชุฎุฏู ูุธุงู ุงูุชุดุบูู ููุฌุฏููุฉ
- โ **ูุฏุนูู ูู Chrome/Edge** - ูุชุตูุญุงุช ุญุฏูุซุฉ

### 4. **Background Sync** ๐
- โ **ูุญุต ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู** - ุชููุงุฆูุงู
- โ **ูุฒุงููุฉ ุงูุจูุงูุงุช** - ุนูุฏ ุงูุนูุฏุฉ ููุฅูุชุฑูุช
- โ **ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุงููุชุฃุฎุฑุฉ** - ุงูุชู ูุงุชุช ุฃุซูุงุก ุนุฏู ุงูุงุชุตุงู
- โ **ูุฏุนูู ูู ูุนุธู ุงููุชุตูุญุงุช** - Chrome, Edge, Firefox

---

## ๐ง ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### Service Worker:
```javascript
// ูุญุต ุงูููุงุนูุฏ ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
async function checkShipmentsAndNotify() {
    const shipments = await getStoredShipments();
    const today = new Date();
    
    for (const shipment of shipments) {
        // ูุญุต ููุนุฏ ุงููุตูู (ูุจู 3 ุฃูุงู)
        // ูุญุต ููุนุฏ ุงูุฏูุน (ูุจู ููููู)
        // ูุญุต ููุนุฏ ุทูุจ ุงูุฅูุฑุงุฌ (ูุจู ููููู)
    }
}
```

### IndexedDB:
```javascript
// ุชุฎุฒูู ุงูุดุญูุงุช ูู ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ
async function storeShipmentsInIndexedDB(shipments) {
    const db = await openIndexedDB();
    const transaction = db.transaction(['shipments'], 'readwrite');
    const store = transaction.objectStore('shipments');
    
    await store.clear();
    for (const shipment of shipments) {
        await store.add(shipment);
    }
}
```

### Periodic Sync:
```javascript
// ุชุณุฌูู ูุญุต ุฏูุฑู ูู 12 ุณุงุนุฉ
await registration.periodicSync.register('check-shipments', {
    minInterval: 12 * 60 * 60 * 1000 // 12 ุณุงุนุฉ
});
```

### Background Sync:
```javascript
// ุชุณุฌูู ูุฒุงููุฉ ุฎูููุฉ
await registration.sync.register('sync-shipments');
```

---

## ๐ ุขููุฉ ุงูุนูู

### 1. ุนูุฏ ูุชุญ ุงูุชุทุจูู:
```
ุงูุชุทุจูู ููุชูุญ
    โ
ุชุญููู ุงูุดุญูุงุช ูู Supabase
    โ
ุชุฎุฒูู ุงูุจูุงูุงุช ูู IndexedDB
    โ
ุชูุนูู Periodic Sync
    โ
ุชูุนูู Background Sync
    โ
ูุญุต ุฏูุฑู ูู 30 ุฏูููุฉ
```

### 2. ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู:
```
ุงูุชุทุจูู ูุบูู
    โ
Service Worker ูุดุท
    โ
Periodic Sync ูุนูู ูู 12 ุณุงุนุฉ
    โ
ุฌูุจ ุงูุจูุงูุงุช ูู IndexedDB
    โ
ูุญุต ุงูููุงุนูุฏ
    โ
ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุณุทุญ ุงูููุชุจ
```

### 3. ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู:
```
ุนูุฏุฉ ุงูุงุชุตุงู
    โ
Background Sync ูููุนูู
    โ
ูุญุต ุงูููุงุนูุฏ
    โ
ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุงููุชุฃุฎุฑุฉ
```

---

## ๐ฏ ุฃููุงุน ุงูุฅุดุนุงุฑุงุช

### ููุนุฏ ุงููุตูู (ูุจู 3 ุฃูุงู):
```javascript
{
    title: 'ุชุฐููุฑ ููุนุฏ ุงููุตูู',
    body: 'ุงูุดุญูุฉ SH001 ุชุตู ุฎูุงู 2 ุฃูุงู',
    icon: '/favicon.ico',
    vibrate: [200, 100, 200],
    requireInteraction: true
}
```

### ููุนุฏ ุงูุฏูุน (ูุจู ููููู):
```javascript
{
    title: 'ุชุฐููุฑ ููุนุฏ ุงูุฏูุน',
    body: 'ููุนุฏ ุฏูุน ุงูุดุญูุฉ SH002 ุบุฏุงู',
    icon: '/favicon.ico',
    vibrate: [200, 100, 200],
    requireInteraction: true
}
```

### ููุนุฏ ุทูุจ ุงูุฅูุฑุงุฌ (ูุจู ููููู):
```javascript
{
    title: 'ุชุฐููุฑ ุทูุจ ุงูุฅูุฑุงุฌ',
    body: 'ููุนุฏ ุทูุจ ุฅูุฑุงุฌ ุงูุดุญูุฉ SH003 ุงูููู',
    icon: '/favicon.ico',
    vibrate: [200, 100, 200],
    requireInteraction: true
}
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุชูุนูู ุงูุฅุดุนุงุฑุงุช:
1. ุงูุชุญ ุงูุชุทุจูู ูู ุงููุชุตูุญ
2. ุงุณูุญ ุจุงูุฅุดุนุงุฑุงุช ุนูุฏ ุงูุทูุจ
3. ุณูุชู ุชูุนูู Periodic Sync ุชููุงุฆูุงู
4. ุฃุบูู ุงูุชุทุจูู - ุงูุฅุดุนุงุฑุงุช ุณุชุณุชูุฑ!

### ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช:
1. ุงูุชุญ ุงูุชุทุจูู
2. ุญููู ุจูุงูุงุช ุชุฌุฑูุจูุฉ
3. ุฃุบูู ุงูุชุทุจูู
4. ุงูุชุธุฑ - ุณุชุตูู ุฅุดุนุงุฑุงุช ุญุณุจ ุงูููุงุนูุฏ

### ูุฑุงูุจุฉ ุงููุธุงู:
1. ุงูุชุญ Developer Tools (F12)
2. ุงูุชูู ุฅูู Application โ Service Workers
3. ุณุชุฌุฏ Service Worker ูุดุท
4. ุชุญูู ูู Console ููุฑุณุงุฆู

---

## ๐ฑ ุฎุตุงุฆุต ุงูุฅุดุนุงุฑุงุช

### ุงูุฎุตุงุฆุต ุงููุชูุฏูุฉ:
- โ **requireInteraction: true** - ุงูุฅุดุนุงุฑ ูุจูู ุญุชู ุงูุชูุงุนู
- โ **vibrate: [200, 100, 200]** - ุงูุชุฒุงุฒ ููููุงุชู
- โ **dir: 'rtl'** - ุงุชุฌุงู ุงููุต ูู ุงููููู ูููุณุงุฑ
- โ **lang: 'ar'** - ุงููุบุฉ ุงูุนุฑุจูุฉ
- โ **badge: '/favicon.ico'** - ุดุงุฑุฉ ุงูุฅุดุนุงุฑ
- โ **timestamp** - ููุช ุงูุฅุดุนุงุฑ

### ุนูุฏ ุงูููุฑ ุนูู ุงูุฅุดุนุงุฑ:
- โ **ูุชุญ ุงูุชุทุจูู** - ุฅุฐุง ูุงู ูุบููุงู
- โ **ุงูุชุฑููุฒ ุนูู ุงูุชุจููุจ** - ุฅุฐุง ูุงู ููุชูุญุงู
- โ **ุงูุงูุชูุงู ููุดุญูุฉ** - ูุจุงุดุฑุฉ

---

## ๐ ุงูุฏูุงู ุงูุฌุฏูุฏุฉ

### ูู Service Worker:

#### checkShipmentsAndNotify()
```javascript
// ูุญุต ุฌููุน ุงูุดุญูุงุช ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุงูููุงุณุจุฉ
async function checkShipmentsAndNotify()
```

#### getStoredShipments()
```javascript
// ุฌูุจ ุงูุดุญูุงุช ูู IndexedDB ุฃู ูู ุงูุชุทุจูู
async function getStoredShipments()
```

#### storeShipmentsInIndexedDB()
```javascript
// ุชุฎุฒูู ุงูุดุญูุงุช ูู IndexedDB
async function storeShipmentsInIndexedDB(shipments)
```

#### showNotification()
```javascript
// ุนุฑุถ ุฅุดุนุงุฑ ุณุทุญ ุงูููุชุจ
async function showNotification(title, body, icon, color)
```

### ูู ุงูุชุทุจูู:

#### storeShipmentsForBackgroundSync()
```javascript
// ุฅุฑุณุงู ุงูุดุญูุงุช ุฅูู Service Worker ููุชุฎุฒูู
async function storeShipmentsForBackgroundSync(shipments)
```

#### registerPeriodicSync()
```javascript
// ุชูุนูู ุงููุญุต ุงูุฏูุฑู ูู 12 ุณุงุนุฉ
async function registerPeriodicSync()
```

#### registerBackgroundSync()
```javascript
// ุชูุนูู ุงููุฒุงููุฉ ุงูุฎูููุฉ
async function registerBackgroundSync()
```

#### triggerBackgroundCheck()
```javascript
// ุฅุฑุณุงู ุทูุจ ูุญุต ููุฑู ุฅูู Service Worker
async function triggerBackgroundCheck()
```

#### getAllShipmentsFromDOM()
```javascript
// ุฌูุจ ุฌููุน ุงูุดุญูุงุช ูู DOM
function getAllShipmentsFromDOM()
```

---

## ๐ ุงูุฌุฏูู ุงูุฒููู

### ูุญุต ุฏูุฑู:
| ุงูููุช | ุงูุญุฏุซ | ุงููุตู |
|-------|-------|-------|
| **ูู 12 ุณุงุนุฉ** | Periodic Sync | ูุญุต ุชููุงุฆู ูู ุงูุฎูููุฉ |
| **ูู 30 ุฏูููุฉ** | ุชุญุฏูุซ ุงูุจูุงูุงุช | ุนูุฏ ูุชุญ ุงูุชุทุจูู |
| **ุนูุฏ ุงูุงุชุตุงู** | Background Sync | ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุฅูุชุฑูุช |

### ุฅุดุนุงุฑุงุช ุงูููุงุนูุฏ:
| ููุน ุงูุฅุดุนุงุฑ | ุงูุชูููุช | ุงููุตู |
|------------|---------|-------|
| **ููุนุฏ ุงููุตูู** | ูุจู 3 ุฃูุงู | ุชูุจูู ูููู |
| **ููุนุฏ ุงูุฏูุน** | ูุจู ููููู | ุชูุจูู ูููู |
| **ููุนุฏ ุงูุฅูุฑุงุฌ** | ูุจู ููููู | ุชูุจูู ูููู |

---

## ๐ ุงูุชูุงูู ูุน ุงููุชุตูุญุงุช

### Periodic Background Sync:
- โ **Chrome 80+** - ูุฏุนูู ุจุงููุงูู
- โ **Edge 80+** - ูุฏุนูู ุจุงููุงูู
- โ๏ธ **Firefox** - ุบูุฑ ูุฏุนูู ุญุงููุงู
- โ๏ธ **Safari** - ุบูุฑ ูุฏุนูู ุญุงููุงู

### Background Sync:
- โ **Chrome 49+** - ูุฏุนูู ุจุงููุงูู
- โ **Edge 79+** - ูุฏุนูู ุจุงููุงูู
- โ **Firefox 44+** - ูุฏุนูู ุฌุฒุฆูุงู
- โ๏ธ **Safari** - ุบูุฑ ูุฏุนูู ุญุงููุงู

### Service Worker Notifications:
- โ **Chrome 42+** - ูุฏุนูู ุจุงููุงูู
- โ **Edge 17+** - ูุฏุนูู ุจุงููุงูู
- โ **Firefox 44+** - ูุฏุนูู ุจุงููุงูู
- โ๏ธ **Safari 16+** - ูุฏุนูู ุฌุฒุฆูุงู

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ุงูุฃูุงู:
- โ **HTTPS ูุทููุจ** - Service Worker ูุนูู ููุท ุนูู HTTPS
- โ **ุฅุฐู ุงููุณุชุฎุฏู** - ูุฌุจ ุงูููุงููุฉ ุนูู ุงูุฅุดุนุงุฑุงุช
- โ **ุจูุงูุงุช ูุญููุฉ** - IndexedDB ุขูู ููุญูู

### ุงูุฃุฏุงุก:
- โ **ูููุฑ ููุทุงูุฉ** - ูุณุชุฎุฏู ูุธุงู ุงูุชุดุบูู ููุฌุฏููุฉ
- โ **ูุง ูุณุชููู ุงูุฐุงูุฑุฉ** - Service Worker ุฎููู
- โ **ูุญุต ุฐูู** - ููุท ููุดุญูุงุช ุฐุงุช ุงูููุงุนูุฏ ุงููุฑูุจุฉ

### ุงูุตูุงูุฉ:
- โ **ููุฏ ููุธู** - ุฏูุงู ูููุตูุฉ ููู ูููุฉ
- โ **ุชุณุฌูู ุดุงูู** - Console.log ูุชุชุจุน ุงูุนูููุงุช
- โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** - try/catch ูู ุฌููุน ุงูุฏูุงู

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### ูุจู ุงูุชุทููุฑ:
- โ ุงูุฅุดุนุงุฑุงุช ุชุนูู ููุท ุนูุฏ ูุชุญ ุงูุชุทุจูู
- โ ูุง ููุฌุฏ ูุญุต ุฏูุฑู ูู ุงูุฎูููุฉ
- โ ูุง ููุฌุฏ ุชุฎุฒูู ูุญูู ููุจูุงูุงุช
- โ ุงูุฅุดุนุงุฑุงุช ุชุชููู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู

### ุจุนุฏ ุงูุชุทููุฑ:
- โ **ุฅุดุนุงุฑุงุช ุชุนูู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู**
- โ **ูุญุต ุฏูุฑู ูู 12 ุณุงุนุฉ**
- โ **ุชุฎุฒูู ุฐูู ูู IndexedDB**
- โ **ูุฒุงููุฉ ุฎูููุฉ ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู**
- โ **ุฅุดุนุงุฑุงุช ุณุทุญ ุงูููุชุจ ูุชูุฏูุฉ**
- โ **ุงูุชุฒุงุฒ ูุตูุช ููุฅุดุนุงุฑุงุช**
- โ **ูุชุญ ุงูุชุทุจูู ุนูุฏ ุงูููุฑ**

---

**ุชู ุงูุชุทููุฑ:** 8 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 2.1.5  
**ุงูุญุงูุฉ:** โ ููุชูู

ุงูุฅุดุนุงุฑุงุช ุงูุขู ุชุนูู ุญุชู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู! ๐โจ
